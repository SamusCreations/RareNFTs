@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@



<div class="card">
   
    <div class="card-body">
        <h5 class="card-title">Report Owner by NFT</h5>

        <div class="mb-3 row">
            <label class="col-form-label">NFT Name</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" autocomplete="off" id="input" oninput="consult()" placeholder="Enter the Nft's name">
            </div>
            <div class="col-sm-4">
                <button type="button" class="btn btn-outline-primary" onclick="consult()">Consult</button>
            </div>
        </div>

        <!-- container donde se muestra la información del Partial View-->
        <div id="container"></div>


    </div>
</div>

@section scripts {
    <script>

        function consult() {

            let div = document.getElementById("container");
            let value = document.getElementById("input").value;
            console.log(value)

            if (value == "") {
                div.innerHTML = "";
                return;
            }

            const myRequest = "/api/Report/GetOwnerByNft?name=" + encodeURIComponent(value);
            console.log(myRequest)

            console.log(myRequest)
            fetch(myRequest)
                .then((response) => {
                    if (!response.ok) {
                        throw new Error('La respuesta de la red no fue exitosa');
                    }
                    return response.text();
                })
                .then((text) => {
                    div.innerHTML = text;
                })
                .catch((error) => {
                    console.error('Hubo un problema con la operación de fetch:', error);
                });
        }

    </script>

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

}